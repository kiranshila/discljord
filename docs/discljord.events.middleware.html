<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>discljord.events.middleware documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name"></span> <span class="project-version"></span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>discljord</span></div></div></li><li class="depth-2 branch"><a href="discljord.cdn.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cdn</span></div></a></li><li class="depth-2"><a href="discljord.connections.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>connections</span></div></a></li><li class="depth-3 branch"><a href="discljord.connections.impl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>impl</span></div></a></li><li class="depth-3"><a href="discljord.connections.specs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>specs</span></div></a></li><li class="depth-2"><a href="discljord.events.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>events</span></div></a></li><li class="depth-3 branch current"><a href="discljord.events.middleware.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>middleware</span></div></a></li><li class="depth-3"><a href="discljord.events.state.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>state</span></div></a></li><li class="depth-2 branch"><a href="discljord.formatting.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>formatting</span></div></a></li><li class="depth-2 branch"><a href="discljord.http.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>http</span></div></a></li><li class="depth-2"><a href="discljord.messaging.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>messaging</span></div></a></li><li class="depth-3 branch"><a href="discljord.messaging.impl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>impl</span></div></a></li><li class="depth-3"><a href="discljord.messaging.specs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>specs</span></div></a></li><li class="depth-2 branch"><a href="discljord.permissions.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>permissions</span></div></a></li><li class="depth-2 branch"><a href="discljord.snowflakes.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>snowflakes</span></div></a></li><li class="depth-2 branch"><a href="discljord.specs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>specs</span></div></a></li><li class="depth-2"><a href="discljord.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="discljord.events.middleware.html#var-concat"><div class="inner"><span>concat</span></div></a></li><li class="depth-1"><a href="discljord.events.middleware.html#var-data-mapping"><div class="inner"><span>data-mapping</span></div></a></li><li class="depth-1"><a href="discljord.events.middleware.html#var-filter"><div class="inner"><span>filter</span></div></a></li><li class="depth-1"><a href="discljord.events.middleware.html#var-ignore-bot-messages"><div class="inner"><span>ignore-bot-messages</span></div></a></li><li class="depth-1"><a href="discljord.events.middleware.html#var-log-when"><div class="inner"><span>log-when</span></div></a></li><li class="depth-1"><a href="discljord.events.middleware.html#var-map"><div class="inner"><span>map</span></div></a></li><li class="depth-1"><a href="discljord.events.middleware.html#var-transduce"><div class="inner"><span>transduce</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">discljord.events.middleware</h1><div class="doc"><pre class="plaintext">Contains functions for constructing middleware, and some default middleware.

Middleware for discljord event handlers allow the modification and filtration
of events to be sent along to event handlers. Following is an example of an
identity middleware, and can be used as an example of what middleware in
discljord look like.

```clojure
(defn identity-middleware
  "Middleware that passes through events unchanged."
  [handler]
  (fn [event-type event-data &amp; more]
    (apply handler event-type event-data more)))
```</pre></div><div class="public anchor" id="var-concat"><h3>concat</h3><div class="usage"><code>(concat handler)</code></div><div class="doc"><pre class="plaintext">Takes a handler function and creates a middleware which concats the handlers.

The events in the handler function passed are always run before the ones that
are given to the middleware when it is applied.</pre></div></div><div class="public anchor" id="var-data-mapping"><h3>data-mapping</h3><div class="usage"><code>(data-mapping f)</code></div><div class="doc"><pre class="plaintext">Makes a transform function for use with [[map]] that operates on event-data.

The resulting function is from a vector of event-type and event-data to a
vector of event-type and event-data. The event-type is passed through without
change, and event-data is transformed by `f`.</pre></div></div><div class="public anchor" id="var-filter"><h3>filter</h3><div class="usage"><code>(filter pred)</code></div><div class="doc"><pre class="plaintext">Makes middleware that only calls the handler if `pred` returns truthy.

`pred` is a predicate expected to take the event-type and event-data.</pre></div></div><div class="public anchor" id="var-ignore-bot-messages"><h3>ignore-bot-messages</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Middleware which won't call the handler if the event is a message from a bot.
</pre></div></div><div class="public anchor" id="var-log-when"><h3>log-when</h3><div class="usage"><code>(log-when filter)</code></div><div class="doc"><pre class="plaintext">Takes a predicate and if it returns true, logs the event before passing it on.

The predicate must take the event-type and the event-data, and return a truthy
value if it should log. If the value is a valid level at which to log, that
logging level will be used.</pre></div></div><div class="public anchor" id="var-map"><h3>map</h3><div class="usage"><code>(map f)</code></div><div class="doc"><pre class="plaintext">Makes a middleware which runs `f` over events before passing to the handler.

`f` is a function of a vector of event-type and event-data to a vector of
event-type and event-data which are then passed to the handler.</pre></div></div><div class="public anchor" id="var-transduce"><h3>transduce</h3><div class="usage"><code>(transduce xf)</code></div><div class="doc"><pre class="plaintext">Makes a middleware which takes a transducer and runs it over event-data.
</pre></div></div></div></body></html>